folder('monitoring') {
        description('Folder containing all jobs for monitoring jenkins')
    }
pipelineJob('monitoring/jenkMon') {
        properties {
        pipelineTriggers {
            triggers {
                cron {
                spec('MONITORING_CRON')
                }
            }
        }
    }
    definition {
        cps {
            script('''
            pipeline {
                agent {
                    label 'ci2-monitor'
                }
                    stages {
                        stage('Publish Success Metric to CloudWatch') {
                        agent {
                            docker {
                                image 'ghcr.io/base2services/jenkmon'
                                label 'ci2-monitor'
                            }
                        }
                        steps {
                            sh "python /app/jenkmon.py"
                        }
                        }
                    }
                }
            '''.stripIndent())
            sandbox()
        }
    }
}